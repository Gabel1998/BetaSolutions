<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="da">
<head th:replace="~{fragments/header :: head}">
    <title>Workload Employees</title>
</head>
<body>

<!-- Header -->
<div th:replace="~{fragments/header :: header}"></div>

<main class="container">
    <h1>Medarbejderbelastning pr. dag</h1>

    <!-- If no data at all -->
    <p th:if="${workload == null || workload.isEmpty()}">Der er ingen data at vise.</p>

    <!-- For each employee ID in the map -->
    <div th:if="${workload != null && !workload.isEmpty()}">
        <section th:each="empEntry : ${workload}" class="employee-section">
            <h2 th:text="'Medarbejder: ' + ${employeeNames.get(empEntry.key)}"></h2>

            <div class="bar-container bar-chart">
                <!-- For each day in this employee's data -->
                <div th:each="dayEntry : ${empEntry.value}"
                     th:with="day=${dayEntry.key}, stats=${dayEntry.value}"
                     class="bar"
                     th:classappend="${stats.second > 100} ? 'overburdened' : ''"
                     th:style="'height:' + (${stats.first} * 10) + 'px'"
                     th:title="${day.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy'))} + ': ' +
                              ${stats.first} + 't (' + ${stats.second} + '%)'">
                    <span th:text="${day.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM'))}" />
                </div>
            </div>
        </section>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>