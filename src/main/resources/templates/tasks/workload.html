<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="da">
<head th:replace="~{fragments/header :: head}">
    <title>Workload Employees</title>
    <!-- SÃ¸rg for at workload.css linkes som det SIDSTE stylesheet her -->
</head>
<body>

<!-- Header -->
<div th:replace="~{fragments/header :: header}"></div>

<main class="container">
    <h1>Medarbejderbelastning pr. dag</h1>

    <!-- Hvis ingen data -->
    <p th:if="${workload == null or #lists.isEmpty(workload)}">
        Der er ingen data at vise.
    </p>

    <!-- For hver medarbejder -->
    <div th:if="${workload != null and !#lists.isEmpty(workload)}">
        <section th:each="empEntry : ${workload}" class="employee-section">
            <h2 th:text="'Medarbejder: ' + ${employeeNames[empEntry.key]}"></h2>

            <div style="position: relative;">
                <div class="axis-label-y">Timer (y-akse)</div>

                <div class="bar-container bar-chart">
                    <div th:each="dayEntry : ${empEntry.value}"
                         th:with="
                   day=${dayEntry.key},
                   stats=${dayEntry.value},
                   hours=${stats.first},
                   pct=${stats.second},
                   clampedPct=${pct > 100 ? 100 : pct},
                   overPct=${pct > 100 ? pct - 100 : 0},
                   normalH=${clampedPct * hours * 10},
                   overH=${overPct * hours * 10}"
                         class="bar"
                         th:title="${day.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy'))} + ': ' + hours + 't (' + pct + '%)'">
                        <div class="bar-normal"
                             th:style="'height:' + normalH + 'px'">
                        </div>

                        <div th:if="${overPct > 0}"
                             class="bar-over"
                             th:style="'height:' + overH + 'px'">
                        </div>

                        <span th:text="${day.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM'))}"></span>                    </div>
                </div>

                <div class="axis-label-x">Dato (x-akse)</div>
            </div>
        </section>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>
